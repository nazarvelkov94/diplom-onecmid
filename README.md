### Инструкция по начальной настройке с описанием внесенных изменений при кастомизации конфигурации «Управление IT-фирмой для компании «Ваш компьютерный мастер».

Разработан и подготовлен к эксплуатации новый функциональный блок в конфигурации «Управление IT-фирмой».
Реализовано:
•	новые подсистемы «Работа с заявками клиентов» и «Расчёт управленческой зарплаты» в соответствии с требованиями заказчика,
•	отчёты по новой функциональности,
•	автотесты для проверки корректности работы подсистемы «Работа с заявками клиентов».

### Общее описание изменений
В конфигурацию добавлены: 
1.	модуль для работы с заявками на обслуживание клиентов
2.	модуль для расчёта управленческой заработной платы.
Для добавленных объектов, реквизитов, методов в конфигураторе использован префикс ВКМ_. При изменении программного кода существующих методов, изменения выделены комментариями.
Все добавленные объекты размещены в новой служебной подсистеме «ВКМ Добавленные Объекты».

### Работа с заявками клиентов

Договоры на абонентское обслуживание
Добавлен новый вид договоров – абонентское обслуживание. В договорах такого вида пользователь имеет возможность внести дату начала действия договора, дату окончания действия договора, сумму ежемесячной абонентской платы и стоимость часа работы специалиста.

### Обслуживание клиентов
Процесс работы с заявками построен следующим образом:
1.	Клиент звонит менеджеру и оставляет заявку на работу специалиста с указанием проблемы, для решения которой нужен специалист.
2.	Менеджер ищет свободное время и планирует заявку на это время. Эти действия производятся в документе «Обслуживание клиента».
3.	При планировании телеграм-бот оповещает специалистов о появлении новой заявки.
4.	Специалист в назначенное время в офисе клиента или удалённо проводит необходимые работы.
5.	Специалист получает подписанный лист учёта рабочего времени или скан/фото листа учёта от клиента. В листе учёта перечисляются виды работ, выполненные специалистом, и фиксируется количество часов к оплате. В дальнейшем документ будет являться подтверждением проведения работ.
6.	Специалист вносит в информационную систему информацию о выполненных работах, количество фактически потраченных часов на каждый вид работы, количество часов к оплате клиенту за каждый вид работы и прикрепляет к документу скан/фото листа учёта рабочего времени.

### Все объекты, связанные с обслуживанием клиентов, располагаются в новой подсистеме «Работа с заявками клиентов».
Реализовано:
1.	Добавлен документ «Обслуживание клиента».
2.	Добавлена возможность хранить присоединенные к документу файлы (подписанный лист учёта рабочего времени или скан/фото листа учёта от клиента).
3.	Добавлен регистр накопления для хранения информации о суммах задолженности клиента «Выполненные клиенту работы».
4.	Реализована обработка проведения по регистру накопления. Сумма к оплате рассчитывается исходя из ставки часа, указанной в договоре.
5.	Для оповещения через Телеграм созданы константы:
o	«Токен управления телеграм-ботом»
o	«Идентификатор группы для оповещения»
6.	Создан справочник Уведомления телеграм-боту из которого уведомления передаются в чат телеграм.
7.	Добавлено регламентное задание «Отправка уведомлений телеграм боту», которое отправляет и после успешной отправки удаляет элементы справочника. В регламентном задании необходимо настроить интервал отправки сообщений.

### Инструкция по созданию телеграм бота
1.	Напишете в Телеграм https://t.me/BotFather команду "/start".
2.	Напишите команду "/newbot".
3.	Выберите имя вашего бота, которое будут видеть пользователи.
4.	Выберите идентификатор вашего бота (он должен заканчиваться на "bot").
5.	Скопируйте токен, который пришлет BotFather и сохраните его в константу «Токен управления телеграм-ботом».
6.	Создайте группу в Телеграм.
7.	Добавьте в группу только что созданного бота.
8.	Назначьте боту права администратора.
9.	Получите идентификатор группы: Напишите любое сообщение в группу. С помощью браузера или Postman выполните запрос https://api.telegram.org/bot[ВашТокен]/getUpdates. В полученном JSON найдите идентификатор группы, в которой получено сообщение, и сохраните его в константу «Идентификатор группы для оповещения».

### Изменения в заполнении документа «Реализации товаров и услуг»

Если в документе Реализации товаров и услуг выбран договор с видом абонентская плата, то реализована возможность автозаполнения такого документа суммой ежемесячной абонентской платы и суммой за выполненные в течения месяца работы по данным документов Обслуживание клиентов. Из документа печатается акт об оказанных услугах.
Реализовано:
1.	Добавлены константы «Номенклатура абонентская плата» - значение «Абонентская плата» и «Номенклатура работы специалиста»- значение «Работы специалиста». 
2.	В форму документа «Реализации товаров и услуг» добавлена кнопка «Заполнить», с помощью которой реализовано автозаполнение данного документа. 
3.	Реализована для документа печатная форма акта об оказанных услугах. Акт реализован в виде docx. У пользователя есть возможность редактирования макета акта.

### Массовое создание документов Реализация товаров и услуг
В начале месяца бухгалтер фирмы формирует акты по всем абонентским договорам. эта процедура автоматизирована с помощью обработки «Массовое создание актов» которая находится в панели сервис в подсистеме «Работа с заявками клиентов». При использовании автозаполнения документ создается последней датой выбранного месяца. 

### Права доступа
Документы Обслуживание клиентов вводят специалисты и менеджеры. Массовое создание документов Реализации использует бухгалтер. Соответствующие роли добавлены.

### Расчёт управленческой зарплаты

Расчёт зарплаты
Для каждого сотрудника есть возможность хранить суммы окладов. Дополнительно для специалистов есть возможность хранить процент от выполненных заказов, который им будет начисляться. Расчёт зарплаты выполняется документом «Начисление заработной платы» по всем видам расчёта, кроме премий. Премии начисляются отдельным документом «Начисление фиксированных премий».
В документах «Начисление заработной платы» и «Начисление фиксированных премий» автоматически рассчитано удержание НДФЛ.
Реализовано:
1.	Созданы планы видов расчёта «Основные начисления», «Дополнительные начисления» и «Удержания».
2.	Созданы регистры расчёта «Основные начисления», «Дополнительные начисления» и «Удержания»
3.	Создан регистр сведений «Условия оплаты сотрудников».
4.	Создан регистр накопления «Выполненные сотрудником работы».
5.	В документе «Обслуживание клиента» реализован алгоритм для формирования движений по регистру «Выполненные сотрудником работы».
Если на дату документа специалисту не установлен процент оплаты от работ, то документ не будет проводится. Если установлен нулевой процент, в этом случае документ проводится.
6.	Создан документ «Начисления зарплаты».
7.	Создан документ «Начисление фиксированной премии», реализована запись премии в регистр при проведении и расчёте НДФЛ.

### Выплата зарплаты
Учитываются начисленные и выплаченные суммы сотрудникам.
Реализовано:
1.	Создан регистр накопления «Взаиморасчеты с сотрудниками».
2.	Для документов «Начисления зарплаты» и «Начисление фиксированной премии» реализовано формирование движений по регистру «Взаиморасчеты с сотрудниками».
3.	Создан документ «Выплата зарплаты» с механизмом автозаполнения по остаткам регистра «Взаиморасчеты с сотрудниками» на дату документа.
4.	Реализован механизм проведения документа по регистру «Взаиморасчеты с сотрудниками».

### Планирование отпусков
В начале года на предприятии составляется график отпусков. Реализована возможность визуального контроля, что все сотрудники одновременно не уйдут в отпуск.
Реализовано:
1.	Создан документ «График отпусков», на форме документа, реализована подсветка строк сотрудников, общая длительность отпуска которых более 28 календарных дней
2.	Создана дополнительная форму документа «Анализ графика», кнопка на открытие дополнительной формы выведена на основную форму документа
3.	На форме «Анализ графика» отображается диаграмма «Ганта» с запланированными отпусками сотрудников текущим документом в выбранном году. 

### Права доступа
Вводом информации о заработной плате, плановых отпусках занимаются кадровики-расчётчики. Необходимые роли созданы и добавлены в соответствующие профили групп.
Все объекты, связанные с расчетом управленческой заработной платы, располагаются в новой подсистеме «Расчёт управленческой зарплаты».

### Отчёты
Для руководителей предприятия добавлена возможность с помощью отчётов контролировать несколько показателей работы предприятия. 

### Выработка специалистов
Отчёт показывает, сколько часов за выбранный период отработал выбранный специалист и какая сумма ему за этот период начислена в виде процента от выплат клиента.

### Анализ выставленных актов
Отчёт включает информацию о клиентах, договорах и суммах, которые должны быть выставлены клиентам на основе данных из документов «Обслуживание». Также показывает фактическую сумму по номенклатуре из константы «Номенклатура работы специалиста», которая была выставлена в текущем месяце.

### Расчёты с сотрудниками
В отчёте представлена информация о том, какие суммы начислены и выплачены каждому сотруднику за указанный период. Также в отчете указана задолженность на начало и на конец этого периода.

### Расход запланированных отпусков
Отчет строится за конкретный год. Отчёт должен показывает сколько дней отпуска у сотрудника в выбранный период по плану и сколько дней он фактически был в отпуске.

### Права доступа
Отчёт по выработке специалистов доступен специалистам и кадровикам-расчетчикам.
Отчёт по анализу выставленных актов доступен бухгалтерам.
Отчёты по зарплате и отпускам доступен кадровикам-расчётчикам.

### Автоматизированное тестирование
Подготовлены сценарии автоматизированного тестов. Сценарии, размещены в репозитории с конфигурацией. Автотесты реализованы с помощью Vanessa Automation.
Сценарии включают следующие шаги:
1.	Планирование нескольких обслуживаний на специалистов от имени Менеджера
2.	Закрытие обслуживаний от имени Специалиста
3.	Массовое создание актов от имени Бухгалтера
4.	Формирование отчёта Анализ выставленных актов, сравнение с эталоном
К сценариям прилагается инструкция по запуску.
